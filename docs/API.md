# A2A Orchestrator API Documentation

The Orchestrator Hub provides a unified interface for triggering multi-agent workflows.

## Endpoints

### 1. Orchestrate Flow

`POST /orchestrate`

Triggers the full **Researcher -> Coder -> Tester** pipeline for a given query.

**Parameters:**
| Name | Type | In | Description |
| :--- | :--- | :--- | :--- |
| `user_query` | `string` | Query | The natural language task for the agents to perform. |

**Example Request:**

```bash
curl -X 'POST' \
  'http://localhost:8000/orchestrate?user_query=Build%20a%20Fibonacci%20generator' \
  -H 'accept: application/json'

```

**Success Response (200 OK):**

```json
{
  "status": "A2A Workflow Complete",
  "pipeline_results": {
    "research": "res-abc123",
    "coding": "cod-def456",
    "testing": "tst-ghi789"
  },
  "test_summary": "... (Markdown report) ...",
  "final_code": "... (Generated Python code) ..."
}

```

---

### 2. MCP Compatibility Tool Call

`POST /tools/call`

Invokes an MCP tool through the HTTP compatibility surface.

**Request Body:**
```json
{
  "tool_name": "ingest_repository_data",
  "arguments": {
    "snapshot": {
      "repository": "adaptco/A2A_MCP"
    },
    "authorization": "Bearer <token>"
  }
}
```

**Response Body:**
```json
{
  "tool_name": "ingest_repository_data",
  "ok": true,
  "result": {
    "ok": true,
    "data": {
      "repository": "adaptco/A2A_MCP",
      "execution_hash": "<64-char-sha256>"
    }
  }
}
```

Canonical operator walkthrough:
- See `docs/REALTIME_AGENT_CONFIGURATION_RUNBOOK.md` for local + remote setup, validation, and troubleshooting.

### 3. Native MCP Streamable HTTP

`POST /mcp`

Native FastMCP endpoint for streamable HTTP clients.

### 4. Plan Ingress Endpoints

- `POST /plans/ingress`
- `POST /plans/{plan_id}/ingress`

Schedules plan ingress for stateflow execution.

---

## Artifact Schemas

All data exchanged between agents follows the `MCPArtifact` Pydantic model:

| Field | Type | Description |
| --- | --- | --- |
| `artifact_id` | `string` | Unique identifier for the output. |
| `type` | `string` | One of: `research_doc`, `code_solution`, `test_report`. |
| `content` | `string` | The payload generated by the agent. |
| `metadata` | `object` | Key-value pairs containing agent versions and model info. |

---

### Final Repository State

You now have a production-grade structure:

* **`/agents`**: The modular brains of your system.
* **`/orchestrator`**: The hub that manages the A2A logic.
* **`/schemas`**: The strict data contracts.
* **`/.github/workflows`**: Automated testing and deployment.
* **`docs/`**: Clear instructions for users.
